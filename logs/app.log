2025-06-17 20:36:54.364 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:36:54.364 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:36:54.476 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:36:54.476 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:36:54.477 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:36:54.477 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:36:54.478 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:36:54.479 | INFO     | logging:callHandlers:1762 - Finished server process [13172]
2025-06-17 20:36:54.480 | INFO     | logging:callHandlers:1762 - Finished server process [13172]
2025-06-17 20:36:56.994 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:36:56.995 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:36:56.996 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:36:56.996 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:36:57.007 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:36:57.007 | INFO     | logging:callHandlers:1762 - Started server process [5672]
2025-06-17 20:36:57.013 | INFO     | logging:callHandlers:1762 - Started server process [5672]
2025-06-17 20:36:57.013 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:36:57.014 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:37:02.536 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:37:02.691 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:37:02.691 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:37:02.691 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:37:02.691 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:37:02.691 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:37:39.415 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:37:39.415 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:37:39.519 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:37:39.519 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:37:39.519 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:37:39.519 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:37:39.519 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:37:39.519 | INFO     | logging:callHandlers:1762 - Finished server process [5672]
2025-06-17 20:37:39.519 | INFO     | logging:callHandlers:1762 - Finished server process [5672]
2025-06-17 20:37:41.622 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:37:41.622 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:37:41.622 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:37:41.622 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:37:41.651 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:37:41.652 | INFO     | logging:callHandlers:1762 - Started server process [2044]
2025-06-17 20:37:41.652 | INFO     | logging:callHandlers:1762 - Started server process [2044]
2025-06-17 20:37:41.653 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:37:41.653 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:37:47.089 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:37:47.228 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:37:47.228 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:37:47.228 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:37:47.228 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:37:47.228 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:38:02.629 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 160
               │     └ 3
               └ <function _main at 0x0000021B46C9D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 160
           │    └ <function BaseProcess._bootstrap at 0x0000021B46B91D00>
           └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021B46B91260>
    └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000021B46C4EC60>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
    │    └ <function subprocess_started at 0x0000021B4901FC40>
    └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000021B48F4DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000021B4901F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000021B48F4DE50>
           │       └ <function run at 0x0000021B48833600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000021B48FB4540>
           │      └ <function Runner.run at 0x0000021B488ECE00>
           └ <asyncio.runners.Runner object at 0x0000021B4897D010>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000021B488E6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000021B4897D010>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021B488E6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021B488EC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021B4881EA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B4C38B860>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8530>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021B4B9BC8F0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B4C38B860>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8530>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8530>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B4C5280E0>
          └ <fastapi.applications.FastAPI object at 0x0000021B4B9BC8F0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B4C537420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B4C5280E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B4C537420>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000021B4B98FBA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021B4C529A30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000021B4C5376A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B4C529B50>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021B4C529A30>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000021B4C5376A0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021B4C9C80E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B4C529B50>
          └ <function wrap_app_handling_exceptions at 0x0000021B4B1A6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>>
          └ <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000021B4B1B00E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000021B4C4DF240>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000021B4C9C8B90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021B4C5374C0>
          └ <function wrap_app_handling_exceptions at 0x0000021B4B1A6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021B4C5374C0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021B4C9C8B90>
                     └ <function get_request_handler.<locals>.app at 0x0000021B4C4DED40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021B4B1A6340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x0000021B4C4DDC60>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021B4C529220>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x0000021B4C4842C0>
                       └ <CryptContext at 0x21b4c3be600>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x0000021B4C442020>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x0000021B4C4B7F60>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000021B4C529A90>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000021B4C529A90>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x0000021B4C46C400>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000021B4C529A90>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x0000021B4C46C180>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x0000021B4C46C180>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2176, in set_backend
    raise default_error
          └ MissingBackendError("bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')")

passlib.exc.MissingBackendError: bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')
2025-06-17 20:38:02.744 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 160
               │     └ 3
               └ <function _main at 0x0000021B46C9D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 160
           │    └ <function BaseProcess._bootstrap at 0x0000021B46B91D00>
           └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021B46B91260>
    └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000021B46C4EC60>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
    │    └ <function subprocess_started at 0x0000021B4901FC40>
    └ <SpawnProcess name='SpawnProcess-3' parent=11936 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000021B48F4DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000021B4901F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000021B48F4DE50>
           │       └ <function run at 0x0000021B48833600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000021B48FB4540>
           │      └ <function Runner.run at 0x0000021B488ECE00>
           └ <asyncio.runners.Runner object at 0x0000021B4897D010>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000021B488E6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000021B4897D010>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021B488E6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021B488EC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021B4881EA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000021B4C9C8F10>()>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B4C38B860>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8530>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021B4B9BC8F0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B4C38B860>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8530>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8530>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B4C5280E0>
          └ <fastapi.applications.FastAPI object at 0x0000021B4B9BC8F0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B4C537420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B4C5280E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B4C537420>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000021B4B98FBA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021B4C529A30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B4C52B050>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000021B4C5376A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B4C529B50>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021B4C529A30>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000021B4C5376A0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021B4C9C80E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B4C529B50>
          └ <function wrap_app_handling_exceptions at 0x0000021B4B1A6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>>
          └ <fastapi.routing.APIRouter object at 0x0000021B4C4D4DD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000021B4B1B00E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000021B4C4DF240>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537740>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000021B4C9C8B90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021B4C5374C0>
          └ <function wrap_app_handling_exceptions at 0x0000021B4B1A6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B4C537880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000021B4C9C8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021B4C5374C0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021B4C9C8B90>
                     └ <function get_request_handler.<locals>.app at 0x0000021B4C4DED40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021B4B1A6340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x0000021B4C4DDC60>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021B4C529220>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x0000021B4C4842C0>
                       └ <CryptContext at 0x21b4c3be600>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x0000021B4C442020>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x0000021B4C4B7F60>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000021B4C529A90>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000021B4C529A90>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x0000021B4C46C400>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000021B4C529A90>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x0000021B4C46C180>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x0000021B4C46C180>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2176, in set_backend
    raise default_error
          └ MissingBackendError("bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')")

passlib.exc.MissingBackendError: bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')
2025-06-17 20:45:17.357 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:45:17.358 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:45:17.359 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:45:17.360 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:45:17.376 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:45:17.376 | INFO     | logging:callHandlers:1762 - Started server process [12372]
2025-06-17 20:45:17.377 | INFO     | logging:callHandlers:1762 - Started server process [12372]
2025-06-17 20:45:17.378 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:45:17.378 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:45:22.739 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:45:22.842 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:45:22.842 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:45:22.843 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:45:22.843 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:45:22.844 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:45:26.743 | WARNING  | logging:callHandlers:1762 - (trapped) error reading bcrypt version
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x00000274EA72D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x00000274EA621D00>
           └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000274EA621260>
    └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000274EA6DEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
    │    └ <function subprocess_started at 0x00000274ECADFC40>
    └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000274ECB0DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000274ECADF2E0>
           │       │   └ <uvicorn.server.Server object at 0x00000274ECB0DE50>
           │       └ <function run at 0x00000274EC2F3600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x00000274ECA74540>
           │      └ <function Runner.run at 0x00000274EC3ACE00>
           └ <asyncio.runners.Runner object at 0x00000274EA6DEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000274EC3A6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000274EA6DEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000274EC3A6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000274EC3AC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000274EC2DEA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000274EFA83770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000274EF64E8D0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000274EFA83770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000274EFF98740>
          └ <fastapi.applications.FastAPI object at 0x00000274EF64E8D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000274EFFA74C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000274EFF98740>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000274EFFA74C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000274EF3FFBA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000274EFF99FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000274EFFA7600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000274EFF98710>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000274EFF99FD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000274EFFA7600>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x00000274EFFBABD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000274EFF98710>
          └ <function wrap_app_handling_exceptions at 0x00000274EEC66C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>>
          └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000274EEC700E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000274EFF4F240>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x00000274F04342F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000274EFFA77E0>
          └ <function wrap_app_handling_exceptions at 0x00000274EEC66C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000274EFFA77E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000274F04342F0>
                     └ <function get_request_handler.<locals>.app at 0x00000274EFF4ED40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000274EEC66340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x00000274EFF4DC60>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000274EFF997F0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x00000274EFEF82C0>
                       └ <CryptContext at 0x274efe2e9f0>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x00000274EFEB6020>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x00000274EFF2BF60>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x00000274F0435550>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x00000274F0435550>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x00000274EFEE0400>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x00000274F0435550>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x00000274EFEE0180>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x00000274EFEE0180>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           │   │           │            └ False
           │   │           └ 'bcrypt'
           │   └ <classmethod(<function BackendMixin.set_backend at 0x00000274EFEE0180>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    │   │            │     └ False
    │   │            └ 'bcrypt'
    │   └ <classmethod(<function SubclassBackendMixin._set_backend at 0x00000274EFEE0540>)>
    └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
          │                     │                 │     └ False
          │                     │                 └ 'bcrypt'
          │                     └ <class 'passlib.handlers.bcrypt.bcrypt'>
          └ <class 'passlib.utils.handlers.SubclassBackendMixin'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
         │        └ {'name': 'bcrypt', 'dryrun': False}
         └ <bound method _BcryptBackend._load_backend_mixin of <class 'passlib.handlers.bcrypt._BcryptBackend'>>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              └ <module 'bcrypt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\bcrypt\\__init__.py'>

AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 20:45:27.036 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x00000274EA72D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x00000274EA621D00>
           └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000274EA621260>
    └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000274EA6DEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
    │    └ <function subprocess_started at 0x00000274ECADFC40>
    └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000274ECB0DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000274ECADF2E0>
           │       │   └ <uvicorn.server.Server object at 0x00000274ECB0DE50>
           │       └ <function run at 0x00000274EC2F3600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x00000274ECA74540>
           │      └ <function Runner.run at 0x00000274EC3ACE00>
           └ <asyncio.runners.Runner object at 0x00000274EA6DEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000274EC3A6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000274EA6DEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000274EC3A6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000274EC3AC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000274EC2DEA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000274EFA83770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000274EF64E8D0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000274EFA83770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000274EFF98740>
          └ <fastapi.applications.FastAPI object at 0x00000274EF64E8D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000274EFFA74C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000274EFF98740>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000274EFFA74C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000274EF3FFBA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000274EFF99FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000274EFFA7600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000274EFF98710>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000274EFF99FD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000274EFFA7600>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x00000274EFFBABD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000274EFF98710>
          └ <function wrap_app_handling_exceptions at 0x00000274EEC66C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>>
          └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000274EEC700E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000274EFF4F240>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x00000274F04342F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000274EFFA77E0>
          └ <function wrap_app_handling_exceptions at 0x00000274EEC66C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000274EFFA77E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000274F04342F0>
                     └ <function get_request_handler.<locals>.app at 0x00000274EFF4ED40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000274EEC66340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x00000274EFF4DC60>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000274EFF997F0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 92, in create_user
    "created_at": settings.now_utc()
                  └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pydantic\main.py", line 767, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
                                 │                                          └ 'now_utc'
                                 └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...

AttributeError: 'Settings' object has no attribute 'now_utc'
2025-06-17 20:45:27.071 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x00000274EA72D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x00000274EA621D00>
           └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000274EA621260>
    └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000274EA6DEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
    │    └ <function subprocess_started at 0x00000274ECADFC40>
    └ <SpawnProcess name='SpawnProcess-1' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000274ECB0DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000274ECADF2E0>
           │       │   └ <uvicorn.server.Server object at 0x00000274ECB0DE50>
           │       └ <function run at 0x00000274EC2F3600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x00000274ECA74540>
           │      └ <function Runner.run at 0x00000274EC3ACE00>
           └ <asyncio.runners.Runner object at 0x00000274EA6DEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000274EC3A6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000274EA6DEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000274EC3A6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000274EC3AC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000274EC2DEA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000274F04353C0>()>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000274EFA83770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000274EF64E8D0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000274EFA83770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F04353A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000274EFF98740>
          └ <fastapi.applications.FastAPI object at 0x00000274EF64E8D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000274EFFA74C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000274EFF98740>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000274EFFA74C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000274EF3FFBA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000274EFF99FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000274EFF98680>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000274EFFA7600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000274EFF98710>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000274EFF99FD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000274EFFA7600>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x00000274EFFBABD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000274EFF98710>
          └ <function wrap_app_handling_exceptions at 0x00000274EEC66C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>>
          └ <fastapi.routing.APIRouter object at 0x00000274EA6B7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000274EEC700E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000274EFF4F240>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7740>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x00000274F04342F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000274EFFA77E0>
          └ <function wrap_app_handling_exceptions at 0x00000274EEC66C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000274EFFA7920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000274F0435...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000274EFFA77E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000274F04342F0>
                     └ <function get_request_handler.<locals>.app at 0x00000274EFF4ED40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000274EEC66340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x00000274EFF4DC60>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000274EFF997F0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 92, in create_user
    "created_at": settings.now_utc()
                  └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pydantic\main.py", line 767, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
                                 │                                          └ 'now_utc'
                                 └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...

AttributeError: 'Settings' object has no attribute 'now_utc'
2025-06-17 20:45:52.956 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:45:52.957 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:45:53.066 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:45:53.066 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:45:53.067 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:45:53.068 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:45:53.068 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:45:53.069 | INFO     | logging:callHandlers:1762 - Finished server process [12372]
2025-06-17 20:45:53.069 | INFO     | logging:callHandlers:1762 - Finished server process [12372]
2025-06-17 20:48:34.826 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:48:34.826 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:48:34.827 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:48:34.828 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:48:34.843 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:48:34.844 | INFO     | logging:callHandlers:1762 - Started server process [6360]
2025-06-17 20:48:34.845 | INFO     | logging:callHandlers:1762 - Started server process [6360]
2025-06-17 20:48:34.845 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:48:34.846 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:48:42.473 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:48:42.641 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:48:42.641 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:48:42.642 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:48:42.643 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:48:42.643 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:48:42.644 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:48:42.655 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:48:42.657 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:48:45.114 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:48:45.115 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:48:45.115 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:48:45.116 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:48:45.127 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:48:45.127 | INFO     | logging:callHandlers:1762 - Started server process [8096]
2025-06-17 20:48:45.133 | INFO     | logging:callHandlers:1762 - Started server process [8096]
2025-06-17 20:48:45.133 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:48:45.134 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:48:51.637 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:48:51.978 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:48:51.978 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:48:51.979 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:48:51.980 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:48:51.980 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:49:29.220 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:49:29.221 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:49:29.330 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:49:29.330 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:49:29.331 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:49:29.332 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:49:29.332 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:49:29.333 | INFO     | logging:callHandlers:1762 - Finished server process [8096]
2025-06-17 20:49:29.333 | INFO     | logging:callHandlers:1762 - Finished server process [8096]
2025-06-17 20:49:31.778 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:49:31.779 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:49:31.780 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:49:31.780 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:49:31.797 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:49:31.797 | INFO     | logging:callHandlers:1762 - Started server process [2776]
2025-06-17 20:49:31.799 | INFO     | logging:callHandlers:1762 - Started server process [2776]
2025-06-17 20:49:31.799 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:49:31.799 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:49:40.594 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:49:40.806 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:49:40.807 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:49:40.808 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:49:40.809 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:49:40.809 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:49:40.810 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:49:40.812 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:49:40.815 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:49:43.174 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:49:43.175 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:49:43.175 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:49:43.176 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:49:43.191 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:49:43.191 | INFO     | logging:callHandlers:1762 - Started server process [1096]
2025-06-17 20:49:43.191 | INFO     | logging:callHandlers:1762 - Started server process [1096]
2025-06-17 20:49:43.192 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:49:43.192 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:49:49.679 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:49:49.917 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:49:49.918 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:49:49.919 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:49:49.920 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:49:49.920 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:49:51.930 | WARNING  | logging:callHandlers:1762 - (trapped) error reading bcrypt version
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 332
               │     └ 3
               └ <function _main at 0x0000025991E9D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 332
           │    └ <function BaseProcess._bootstrap at 0x0000025991D91D00>
           └ <SpawnProcess name='SpawnProcess-14' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025991D91260>
    └ <SpawnProcess name='SpawnProcess-14' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025991E4EBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=9016 started>
    │    └ <function subprocess_started at 0x000002599418FC40>
    └ <SpawnProcess name='SpawnProcess-14' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=712, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000259941BDE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=712, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002599418F2E0>
           │       │   └ <uvicorn.server.Server object at 0x00000259941BDE50>
           │       └ <function run at 0x0000025993A13600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000025994144540>
           │      └ <function Runner.run at 0x0000025993ABCE00>
           └ <asyncio.runners.Runner object at 0x0000025991E4EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000025993AB6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000025991E4EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025993AB6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025993ABC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000259939FEA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000025997B18E20>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000025997B18E20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000025997B18E20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000025997B18E20>()>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025993AD7EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18E00>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000259975987A0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025993AD7EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18E00>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18E00>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000259973CFF20>
          └ <fastapi.applications.FastAPI object at 0x00000259975987A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000259941D0E00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025997679B50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000259973CFF20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000259941D0E00>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000025996ADFC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025997679B50>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025997679B50...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000025997678230>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025997679B50>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000025997687600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025997679490>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000025997678230>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000025997687600>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000025997B184A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000025991E27AD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025997679490>
          └ <function wrap_app_handling_exceptions at 0x0000025996306C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025997687740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000025991E27AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025997687740>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000025991E27AD0>>
          └ <fastapi.routing.APIRouter object at 0x0000025991E27AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025997687740>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000259963100E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025997687740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000025997633240>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025997687740>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000025997B18AA0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000259976877E0>
          └ <function wrap_app_handling_exceptions at 0x0000025996306C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025997687920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000025997B18...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000259976877E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025997B18AA0>
                     └ <function get_request_handler.<locals>.app at 0x0000025997632D40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025996306340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x0000025997631C60>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025997679250>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x00000259975D82C0>
                       └ <CryptContext at 0x2599749b290>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x0000025997592020>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x000002599760FF60>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000025997B19010>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000025997B19010>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x00000259975C0400>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000025997B19010>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x00000259975C0180>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x00000259975C0180>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           │   │           │            └ False
           │   │           └ 'bcrypt'
           │   └ <classmethod(<function BackendMixin.set_backend at 0x00000259975C0180>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    │   │            │     └ False
    │   │            └ 'bcrypt'
    │   └ <classmethod(<function SubclassBackendMixin._set_backend at 0x00000259975C0540>)>
    └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
          │                     │                 │     └ False
          │                     │                 └ 'bcrypt'
          │                     └ <class 'passlib.handlers.bcrypt.bcrypt'>
          └ <class 'passlib.utils.handlers.SubclassBackendMixin'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
         │        └ {'name': 'bcrypt', 'dryrun': False}
         └ <bound method _BcryptBackend._load_backend_mixin of <class 'passlib.handlers.bcrypt._BcryptBackend'>>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              └ <module 'bcrypt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\bcrypt\\__init__.py'>

AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 20:49:52.227 | ERROR    | app.db.user_db:create_user:35 - ❌ Error creating user: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:50:50.595 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:50:50.595 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:50:50.705 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:50:50.706 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:50:50.706 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:50:50.707 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:50:50.708 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:50:50.708 | INFO     | logging:callHandlers:1762 - Finished server process [1096]
2025-06-17 20:50:50.709 | INFO     | logging:callHandlers:1762 - Finished server process [1096]
2025-06-17 20:50:53.170 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:50:53.170 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:50:53.171 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:50:53.172 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:50:53.187 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:50:53.188 | INFO     | logging:callHandlers:1762 - Started server process [6752]
2025-06-17 20:50:53.189 | INFO     | logging:callHandlers:1762 - Started server process [6752]
2025-06-17 20:50:53.189 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:50:53.190 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:51:00.448 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:51:00.537 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:51:00.538 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:51:00.539 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:51:00.539 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:51:00.539 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:51:00.541 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:51:00.542 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:51:00.544 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:51:03.006 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:51:03.007 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:51:03.007 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:51:03.008 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:51:03.023 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:51:03.024 | INFO     | logging:callHandlers:1762 - Started server process [8232]
2025-06-17 20:51:03.024 | INFO     | logging:callHandlers:1762 - Started server process [8232]
2025-06-17 20:51:03.025 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:51:03.026 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:51:08.420 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:51:08.547 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:51:08.548 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:51:08.548 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:51:08.549 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:51:08.549 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:51:10.283 | WARNING  | logging:callHandlers:1762 - (trapped) error reading bcrypt version
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x0000027D0F40D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x0000027D0F301D00>
           └ <SpawnProcess name='SpawnProcess-16' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000027D0F301260>
    └ <SpawnProcess name='SpawnProcess-16' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000027D0F3BEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-16' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-16' parent=9016 started>
    │    └ <function subprocess_started at 0x0000027D1172FC40>
    └ <SpawnProcess name='SpawnProcess-16' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=708, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000027D1175DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=708, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000027D1172F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000027D1175DE50>
           │       └ <function run at 0x0000027D10F83600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000027D116C4540>
           │      └ <function Runner.run at 0x0000027D1102CE00>
           └ <asyncio.runners.Runner object at 0x0000027D0F3BEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000027D11026A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000027D0F3BEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027D11026980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027D1102C7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027D10F6EA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000027D150A8CA0>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000027D150A8CA0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000027D150A8CA0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000027D150A8CA0>()>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027D11047EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8C80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027D149A8080>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027D11047EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8C80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8C80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027D14C098E0>
          └ <fastapi.applications.FastAPI object at 0x0000027D149A8080>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027D14C17560>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027D14C096D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027D14C098E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027D14C17560>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000027D1406FC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027D14C096D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000027D14C096D0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000027D14C09730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027D14C096D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000027D14C176A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027D14C092E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000027D14C09730>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000027D14C176A0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000027D150A87A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000027D14B7EED0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027D14C092E0>
          └ <function wrap_app_handling_exceptions at 0x0000027D138B6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027D14C177E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000027D14B7EED0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027D14C177E0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000027D14B7EED0>>
          └ <fastapi.routing.APIRouter object at 0x0000027D14B7EED0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027D14C177E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027D138C00E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027D14C177E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000027D14BC3420>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027D14C177E0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000027D150A8560>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000027D14C17880>
          └ <function wrap_app_handling_exceptions at 0x0000027D138B6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027D14C179C0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000027D150A8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000027D14C17880>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000027D150A8560>
                     └ <function get_request_handler.<locals>.app at 0x0000027D14BC2AC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027D138B6340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x0000027D14BC1D00>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000027D14C09130>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x0000027D14B68360>
                       └ <CryptContext at 0x27d14a06e40>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x0000027D14B260C0>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x0000027D14BC0040>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000027D150A8E30>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000027D150A8E30>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x0000027D14B504A0>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000027D150A8E30>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x0000027D14B50220>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x0000027D14B50220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           │   │           │            └ False
           │   │           └ 'bcrypt'
           │   └ <classmethod(<function BackendMixin.set_backend at 0x0000027D14B50220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    │   │            │     └ False
    │   │            └ 'bcrypt'
    │   └ <classmethod(<function SubclassBackendMixin._set_backend at 0x0000027D14B505E0>)>
    └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
          │                     │                 │     └ False
          │                     │                 └ 'bcrypt'
          │                     └ <class 'passlib.handlers.bcrypt.bcrypt'>
          └ <class 'passlib.utils.handlers.SubclassBackendMixin'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
         │        └ {'name': 'bcrypt', 'dryrun': False}
         └ <bound method _BcryptBackend._load_backend_mixin of <class 'passlib.handlers.bcrypt._BcryptBackend'>>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              └ <module 'bcrypt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\bcrypt\\__init__.py'>

AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 20:51:10.578 | ERROR    | app.db.user_db:get_user_by_email:47 - ❌ Error getting user by email: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:51:10.579 | ERROR    | app.db.user_db:create_user:35 - ❌ Error creating user: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:51:48.037 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:51:48.038 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:51:48.145 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:51:48.149 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:51:48.150 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:51:48.151 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:51:48.151 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:51:48.152 | INFO     | logging:callHandlers:1762 - Finished server process [8232]
2025-06-17 20:51:48.152 | INFO     | logging:callHandlers:1762 - Finished server process [8232]
2025-06-17 20:51:51.118 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:51:51.118 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:51:51.118 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:51:51.118 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:51:51.138 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:51:51.139 | INFO     | logging:callHandlers:1762 - Started server process [12240]
2025-06-17 20:51:51.139 | INFO     | logging:callHandlers:1762 - Started server process [12240]
2025-06-17 20:51:51.139 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:51:51.140 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:51:56.215 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:51:56.317 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:51:56.318 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:51:56.319 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:51:56.320 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:51:56.321 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:52:33.182 | WARNING  | logging:callHandlers:1762 - (trapped) error reading bcrypt version
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 312
               │     └ 3
               └ <function _main at 0x00000260E6FCD760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 312
           │    └ <function BaseProcess._bootstrap at 0x00000260E6EC1D00>
           └ <SpawnProcess name='SpawnProcess-17' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000260E6EC1260>
    └ <SpawnProcess name='SpawnProcess-17' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000260E6F7EBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=9016 started>
    │    └ <function subprocess_started at 0x00000260E92EFC40>
    └ <SpawnProcess name='SpawnProcess-17' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=448, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000260E931DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=448, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000260E92EF2E0>
           │       │   └ <uvicorn.server.Server object at 0x00000260E931DE50>
           │       └ <function run at 0x00000260E8B43600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x00000260E9284540>
           │      └ <function Runner.run at 0x00000260E8BECE00>
           └ <asyncio.runners.Runner object at 0x00000260E6F7EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000260E8BE6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000260E6F7EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000260E8BE6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000260E8BEC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000260E8B2EA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000260ECC892D0>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000260ECC892D0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000260ECC892D0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000260ECC892D0>()>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000260E8C07EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC892B0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000260E92F6BD0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000260E8C07EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC892B0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC892B0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000260EC7E9AF0>
          └ <fastapi.applications.FastAPI object at 0x00000260E92F6BD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000260EC7F7420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000260EC7EAEA0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000260EC7E9AF0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000260EC7F7420>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000260EBC4FC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000260EC7EAEA0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000260EC7EAEA0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000260EC7E98E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000260EC7EAEA0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000260EC7F7740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000260EC7E95E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000260EC7E98E0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000260EC7F7740>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x00000260ECC889E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000260EC75F740>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000260EC7E95E0>
          └ <function wrap_app_handling_exceptions at 0x00000260EB2FEC00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000260EC7F7880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x00000260EC75F740>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000260EC7F7880>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000260EC75F740>>
          └ <fastapi.routing.APIRouter object at 0x00000260EC75F740>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000260EC7F7880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000260EB47C0E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000260EC7F7880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000260EC79F420>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000260EC7F7880>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x00000260ECC88F50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000260EC7F7920>
          └ <function wrap_app_handling_exceptions at 0x00000260EB2FEC00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000260EC7F7A60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000260ECC89...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000260EC7F7920>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000260ECC88F50>
                     └ <function get_request_handler.<locals>.app at 0x00000260EC79EAC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000260EB2FE340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x00000260EC79DD00>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000260EC7E9250>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x00000260EC748360>
                       └ <CryptContext at 0x260ec67e660>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x00000260EC7020C0>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x00000260EC79C040>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x00000260EC80A8D0>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x00000260EC80A8D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x00000260EC7304A0>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x00000260EC80A8D0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x00000260EC730220>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x00000260EC730220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           │   │           │            └ False
           │   │           └ 'bcrypt'
           │   └ <classmethod(<function BackendMixin.set_backend at 0x00000260EC730220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    │   │            │     └ False
    │   │            └ 'bcrypt'
    │   └ <classmethod(<function SubclassBackendMixin._set_backend at 0x00000260EC7305E0>)>
    └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
          │                     │                 │     └ False
          │                     │                 └ 'bcrypt'
          │                     └ <class 'passlib.handlers.bcrypt.bcrypt'>
          └ <class 'passlib.utils.handlers.SubclassBackendMixin'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
         │        └ {'name': 'bcrypt', 'dryrun': False}
         └ <bound method _BcryptBackend._load_backend_mixin of <class 'passlib.handlers.bcrypt._BcryptBackend'>>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              └ <module 'bcrypt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\bcrypt\\__init__.py'>

AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 20:52:33.548 | ERROR    | app.db.user_db:get_user_by_email:47 - ❌ Error getting user by email: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:52:33.550 | ERROR    | app.db.user_db:create_user:35 - ❌ Error creating user: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:52:40.806 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:52:40.806 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:52:40.917 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:52:40.917 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:52:40.918 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:52:40.918 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:52:40.918 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:52:40.919 | INFO     | logging:callHandlers:1762 - Finished server process [12240]
2025-06-17 20:52:40.919 | INFO     | logging:callHandlers:1762 - Finished server process [12240]
2025-06-17 20:52:43.933 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:52:43.934 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:52:43.935 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:52:43.935 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:52:43.949 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:52:43.949 | INFO     | logging:callHandlers:1762 - Started server process [2536]
2025-06-17 20:52:43.949 | INFO     | logging:callHandlers:1762 - Started server process [2536]
2025-06-17 20:52:43.949 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:52:43.949 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:52:49.551 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:52:49.669 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:52:49.670 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:52:49.670 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:52:49.671 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:52:49.671 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:52:49.671 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:52:49.673 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:52:49.674 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 20:52:52.403 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:52:52.403 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:52:52.404 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:52:52.405 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:52:52.418 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:52:52.419 | INFO     | logging:callHandlers:1762 - Started server process [12556]
2025-06-17 20:52:52.420 | INFO     | logging:callHandlers:1762 - Started server process [12556]
2025-06-17 20:52:52.420 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:52:52.421 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:52:57.889 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:52:57.994 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:52:57.995 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:52:57.995 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:52:57.996 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:52:57.996 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:53:57.256 | WARNING  | logging:callHandlers:1762 - (trapped) error reading bcrypt version
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 164
               │     └ 3
               └ <function _main at 0x0000024EF9E3D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 164
           │    └ <function BaseProcess._bootstrap at 0x0000024EF9D31D00>
           └ <SpawnProcess name='SpawnProcess-19' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024EF9D31260>
    └ <SpawnProcess name='SpawnProcess-19' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024EF9DEEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=9016 started>
    │    └ <function subprocess_started at 0x0000024EFC1CFC40>
    └ <SpawnProcess name='SpawnProcess-19' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024EFC1FDE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024EFC1CF2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000024EFC1FDE50>
           │       └ <function run at 0x0000024EFB9E3600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000024EFC164540>
           │      └ <function Runner.run at 0x0000024EFBA9CE00>
           └ <asyncio.runners.Runner object at 0x0000024EF9DEEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000024EFBA96A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000024EF9DEEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024EFBA96980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024EFBA9C7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024EFB9CEA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000024EFF6EBD30>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000024EFF6EBD30>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000024EFF6EBD30>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000024EFF6EBD30>()>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024EFBAB7EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65A90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024EFF5BB3B0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024EFBAB7EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65A90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65A90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024EFF6C40B0>
          └ <fastapi.applications.FastAPI object at 0x0000024EFF5BB3B0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024EFF6D7600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024EFF69B1A0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024EFF6C40B0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024EFF6D7600>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000024EFEB2FC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024EFF69B1A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024EFF69B1A0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024EFF6C4980>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024EFF69B1A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024EFF6D76A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024EFF6C5BE0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024EFF6C4980>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024EFF6D76A0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000024EFFB645C0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024EFF637950>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024EFF6C5BE0>
          └ <function wrap_app_handling_exceptions at 0x0000024EFE356C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024EFF6D77E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000024EFF637950>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024EFF6D77E0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024EFF637950>>
          └ <fastapi.routing.APIRouter object at 0x0000024EFF637950>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024EFF6D77E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024EFE3600E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024EFF6D77E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024EFF67F420>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024EFF6D77E0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000024EFFB65730>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000024EFF6D7880>
          └ <function wrap_app_handling_exceptions at 0x0000024EFE356C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024EFF6D79C0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024EFFB65...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000024EFF6D7880>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024EFFB65730>
                     └ <function get_request_handler.<locals>.app at 0x0000024EFF67EAC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024EFE356340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x0000024EFF67DD00>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024EFF6C5970>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x0000024EFF628360>
                       └ <CryptContext at 0x24eff5b90a0>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x0000024EFF5E60C0>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x0000024EFF67C040>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000024EFFB65BB0>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000024EFFB65BB0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x0000024EFF6104A0>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x0000024EFFB65BB0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x0000024EFF610220>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x0000024EFF610220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           │   │           │            └ False
           │   │           └ 'bcrypt'
           │   └ <classmethod(<function BackendMixin.set_backend at 0x0000024EFF610220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    │   │            │     └ False
    │   │            └ 'bcrypt'
    │   └ <classmethod(<function SubclassBackendMixin._set_backend at 0x0000024EFF6105E0>)>
    └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
          │                     │                 │     └ False
          │                     │                 └ 'bcrypt'
          │                     └ <class 'passlib.handlers.bcrypt.bcrypt'>
          └ <class 'passlib.utils.handlers.SubclassBackendMixin'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
         │        └ {'name': 'bcrypt', 'dryrun': False}
         └ <bound method _BcryptBackend._load_backend_mixin of <class 'passlib.handlers.bcrypt._BcryptBackend'>>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              └ <module 'bcrypt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\bcrypt\\__init__.py'>

AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 20:53:57.633 | ERROR    | app.db.user_db:get_user_by_email:47 - ❌ Error getting user by email: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:53:57.643 | ERROR    | app.db.user_db:create_user:35 - ❌ Error creating user: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-06-17 20:57:00.024 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:57:00.025 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 20:57:00.133 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:57:00.134 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 20:57:00.134 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 20:57:00.135 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:57:00.135 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 20:57:00.136 | INFO     | logging:callHandlers:1762 - Finished server process [12556]
2025-06-17 20:57:00.136 | INFO     | logging:callHandlers:1762 - Finished server process [12556]
2025-06-17 20:57:02.646 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 20:57:02.647 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 20:57:02.647 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 20:57:02.648 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 20:57:02.663 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 20:57:02.664 | INFO     | logging:callHandlers:1762 - Started server process [8292]
2025-06-17 20:57:02.665 | INFO     | logging:callHandlers:1762 - Started server process [8292]
2025-06-17 20:57:02.665 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:57:02.666 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 20:57:07.828 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 20:57:07.936 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 20:57:07.937 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 20:57:07.937 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 20:57:07.937 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 20:57:07.938 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 21:00:18.303 | WARNING  | logging:callHandlers:1762 - (trapped) error reading bcrypt version
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x000002F98638D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x000002F986281D00>
           └ <SpawnProcess name='SpawnProcess-20' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002F986281260>
    └ <SpawnProcess name='SpawnProcess-20' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002F98633EBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=9016 started>
    │    └ <function subprocess_started at 0x000002F98871FC40>
    └ <SpawnProcess name='SpawnProcess-20' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002F98874DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002F98871F2E0>
           │       │   └ <uvicorn.server.Server object at 0x000002F98874DE50>
           │       └ <function run at 0x000002F987F33600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x000002F9886B4540>
           │      └ <function Runner.run at 0x000002F987FECE00>
           └ <asyncio.runners.Runner object at 0x000002F98633EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002F987FE6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002F98633EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002F987FE6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002F987FEC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002F987F1EA20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x000002F98BC6BD30>()>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x000002F98BC6BD30>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x000002F98BC6BD30>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x000002F98BC6BD30>()>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002F98BB9B8F0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E98B0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002F988726BD0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002F98BB9B8F0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E98B0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E98B0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002F98BC49790>
          └ <fastapi.applications.FastAPI object at 0x000002F988726BD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002F98BC57600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002F98BC4B3B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002F98BC49790>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '75', 'sec-ch-ua-platform': '"Windows"', 'us...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002F98BC57600>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002F98B0AFC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002F98BC4B3B0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002F98BC4B3B0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002F98BC49CA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002F98BC4B3B0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002F98BC576A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002F98BC49040>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002F98BC49CA0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002F98BC576A0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x000002F98C0E8890>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002F98633D1C0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002F98BC49040>
          └ <function wrap_app_handling_exceptions at 0x000002F98A8A6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002F98BC577E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x000002F98633D1C0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002F98BC577E0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002F98633D1C0>>
          └ <fastapi.routing.APIRouter object at 0x000002F98633D1C0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002F98BC577E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002F98A8B00E0>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002F98BC577E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002F98BC03420>
          └ APIRoute(path='/routers/v1/create-user', name='create_user', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002F98BC577E0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x000002F98C0E8470>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002F98BC57880>
          └ <function wrap_app_handling_exceptions at 0x000002F98A8A6C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002F98BC579C0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002F98C0E9...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002F98BC57880>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002F98C0E8470>
                     └ <function get_request_handler.<locals>.app at 0x000002F98BC02AC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002F98A8A6340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'create_user_request': CreateUserRequest(username='john.doe@example.com', password='securepassword123')}
                 │         └ <function create_user at 0x000002F98BC01D00>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002F98BC49490>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 91, in create_user
    "hashed_password": bcrypt_context.hash(create_user_request.password),
                       │              │    │                   └ 'securepassword123'
                       │              │    └ CreateUserRequest(username='john.doe@example.com', password='securepassword123')
                       │              └ <function CryptContext.hash at 0x000002F98BBAC360>
                       └ <CryptContext at 0x2f98bade420>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           │      │    │         └ {}
           │      │    └ 'securepassword123'
           │      └ <classmethod(<function GenericHandler.hash at 0x000002F98BB620C0>)>
           └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
    │    │          │    │              └ 'securepassword123'
    │    │          │    └ <function _NoBackend._calc_checksum at 0x000002F98BC00040>
    │    │          └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x000002F98BB439B0>
    │    └ None
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x000002F98BB439B0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    │    └ <classmethod(<function BackendMixin._stub_requires_backend at 0x000002F98BB8C4A0>)>
    └ <passlib.handlers.bcrypt.<customized bcrypt hasher> object at 0x000002F98BB439B0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    │   └ <classmethod(<function BackendMixin.set_backend at 0x000002F98BB8C220>)>
    └ <class 'passlib.handlers.bcrypt.<customized bcrypt hasher>'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           │     │           │            └ False
           │     │           └ 'any'
           │     └ <classmethod(<function BackendMixin.set_backend at 0x000002F98BB8C220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           │   │           │            └ False
           │   │           └ 'bcrypt'
           │   └ <classmethod(<function BackendMixin.set_backend at 0x000002F98BB8C220>)>
           └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    │   │            │     └ False
    │   │            └ 'bcrypt'
    │   └ <classmethod(<function SubclassBackendMixin._set_backend at 0x000002F98BB8C5E0>)>
    └ <class 'passlib.handlers.bcrypt.bcrypt'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
          │                     │                 │     └ False
          │                     │                 └ 'bcrypt'
          │                     └ <class 'passlib.handlers.bcrypt.bcrypt'>
          └ <class 'passlib.utils.handlers.SubclassBackendMixin'>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
         │        └ {'name': 'bcrypt', 'dryrun': False}
         └ <bound method _BcryptBackend._load_backend_mixin of <class 'passlib.handlers.bcrypt._BcryptBackend'>>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              └ <module 'bcrypt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\bcrypt\\__init__.py'>

AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 21:00:18.614 | ERROR    | app.db.user_db:get_user_by_email:49 - ❌ Error getting user by email: Collection not initialized. Call init() first.
2025-06-17 21:00:18.615 | ERROR    | app.db.user_db:create_user:36 - ❌ Error creating user: Collection not initialized. Call init() first.
2025-06-17 21:04:31.981 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 21:04:31.982 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 21:04:32.095 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 21:04:32.095 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 21:04:32.096 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 21:04:32.097 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 21:04:32.097 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 21:04:32.099 | INFO     | logging:callHandlers:1762 - Finished server process [8292]
2025-06-17 21:04:32.100 | INFO     | logging:callHandlers:1762 - Finished server process [8292]
2025-06-17 21:04:34.651 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 21:04:34.652 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 21:04:34.652 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 21:04:34.653 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 21:04:34.676 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 21:04:34.677 | INFO     | logging:callHandlers:1762 - Started server process [11396]
2025-06-17 21:04:34.677 | INFO     | logging:callHandlers:1762 - Started server process [11396]
2025-06-17 21:04:34.678 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 21:04:34.679 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 21:04:39.950 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 21:04:40.066 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 21:04:40.067 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 21:04:40.067 | INFO     | app.main:startup_event:34 - Application startup complete
2025-06-17 21:04:40.068 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 21:04:40.068 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:02:03.562 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:02:03.562 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:02:03.665 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:02:03.665 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:02:03.665 | INFO     | app.main:shutdown_event:38 - Application shutdown initiated
2025-06-17 22:02:03.666 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:02:03.667 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:02:03.667 | INFO     | logging:callHandlers:1762 - Finished server process [11396]
2025-06-17 22:02:03.668 | INFO     | logging:callHandlers:1762 - Finished server process [11396]
2025-06-17 22:02:08.035 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:02:08.035 | INFO     | app.main:<module>:11 - Starting application initialization
2025-06-17 22:02:08.035 | INFO     | app.main:<module>:18 - FastAPI application created
2025-06-17 22:02:08.035 | INFO     | app.main:<module>:22 - Middleware configured
2025-06-17 22:02:08.063 | INFO     | app.main:<module>:29 - API routes configured
2025-06-17 22:02:08.064 | INFO     | logging:callHandlers:1762 - Started server process [6884]
2025-06-17 22:02:08.065 | INFO     | logging:callHandlers:1762 - Started server process [6884]
2025-06-17 22:02:08.065 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:02:08.066 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:02:13.210 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:02:13.311 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:02:13.312 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:02:13.314 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 34, in startup_event
    await db.connect_db()
         ^^^^^^^
NameError: name 'user_db' is not defined

2025-06-17 22:02:13.314 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 34, in startup_event
    await db.connect_db()
         ^^^^^^^
NameError: name 'user_db' is not defined

2025-06-17 22:02:13.317 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:02:13.318 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:02:25.459 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:02:25.460 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:02:25.460 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:02:25.461 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:02:25.476 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:02:25.476 | INFO     | logging:callHandlers:1762 - Started server process [3308]
2025-06-17 22:02:25.476 | INFO     | logging:callHandlers:1762 - Started server process [3308]
2025-06-17 22:02:25.476 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:02:25.476 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:02:30.524 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:02:30.624 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:02:30.624 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:02:30.624 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.init()
          ^^^^^^^^^^^^
AttributeError: module 'app.db.user_db' has no attribute 'init'

2025-06-17 22:02:30.624 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.init()
          ^^^^^^^^^^^^
AttributeError: module 'app.db.user_db' has no attribute 'init'

2025-06-17 22:02:30.641 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:02:30.642 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:03:36.023 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:03:36.023 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:03:36.023 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:03:36.023 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:03:36.039 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:03:36.039 | INFO     | logging:callHandlers:1762 - Started server process [4536]
2025-06-17 22:03:36.052 | INFO     | logging:callHandlers:1762 - Started server process [4536]
2025-06-17 22:03:36.053 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:03:36.053 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:03:41.265 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:03:41.367 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:03:41.367 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:03:41.377 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.user_db.init()
  File "C:\Users\anant\ai_email_categorizer\app\db\user_db.py", line 20, in init
    self._collection = db.get_collection('users')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\ai_email_categorizer\app\db\base.py", line 68, in get_collection
    if not cls.db:
           ^^^^^^
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pymongo\database.py", line 1337, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None

2025-06-17 22:03:41.391 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.user_db.init()
  File "C:\Users\anant\ai_email_categorizer\app\db\user_db.py", line 20, in init
    self._collection = db.get_collection('users')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\ai_email_categorizer\app\db\base.py", line 68, in get_collection
    if not cls.db:
           ^^^^^^
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pymongo\database.py", line 1337, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None

2025-06-17 22:03:41.394 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:03:41.394 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:03:58.200 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:03:58.200 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:03:58.200 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:03:58.200 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:03:58.215 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:03:58.215 | INFO     | logging:callHandlers:1762 - Started server process [11736]
2025-06-17 22:03:58.230 | INFO     | logging:callHandlers:1762 - Started server process [11736]
2025-06-17 22:03:58.231 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:03:58.231 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:04:03.174 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:04:03.404 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:04:03.410 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:04:03.413 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.user_db.init()
  File "C:\Users\anant\ai_email_categorizer\app\db\user_db.py", line 20, in init
    self._collection = db.get_collection('users')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\ai_email_categorizer\app\db\base.py", line 68, in get_collection
    if not cls.db:
           ^^^^^^
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pymongo\database.py", line 1337, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None

2025-06-17 22:04:03.416 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.user_db.init()
  File "C:\Users\anant\ai_email_categorizer\app\db\user_db.py", line 20, in init
    self._collection = db.get_collection('users')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\ai_email_categorizer\app\db\base.py", line 68, in get_collection
    if not cls.db:
           ^^^^^^
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pymongo\database.py", line 1337, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None

2025-06-17 22:04:03.418 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:04:03.418 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:04:05.775 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:04:05.775 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:04:05.775 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:04:05.791 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:04:05.791 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:04:05.791 | INFO     | logging:callHandlers:1762 - Started server process [11944]
2025-06-17 22:04:05.807 | INFO     | logging:callHandlers:1762 - Started server process [11944]
2025-06-17 22:04:05.807 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:04:05.808 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:04:10.904 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:04:10.990 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:04:10.990 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:04:10.992 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.user_db.init()
  File "C:\Users\anant\ai_email_categorizer\app\db\user_db.py", line 20, in init
    self._collection = db.get_collection('users')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\ai_email_categorizer\app\db\base.py", line 68, in get_collection
    if not cls.db:
           ^^^^^^
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pymongo\database.py", line 1337, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None

2025-06-17 22:04:10.994 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 734, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 610, in __aenter__
    await self._router.startup()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 711, in startup
    await handler()
  File "C:\Users\anant\ai_email_categorizer\app\main.py", line 35, in startup_event
    await user_db.user_db.init()
  File "C:\Users\anant\ai_email_categorizer\app\db\user_db.py", line 20, in init
    self._collection = db.get_collection('users')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\ai_email_categorizer\app\db\base.py", line 68, in get_collection
    if not cls.db:
           ^^^^^^
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pymongo\database.py", line 1337, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None

2025-06-17 22:04:10.996 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:04:10.997 | ERROR    | logging:callHandlers:1762 - Application startup failed. Exiting.
2025-06-17 22:04:51.376 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:04:51.377 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:04:51.378 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:04:51.378 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:04:51.394 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:04:51.395 | INFO     | logging:callHandlers:1762 - Started server process [9188]
2025-06-17 22:04:51.395 | INFO     | logging:callHandlers:1762 - Started server process [9188]
2025-06-17 22:04:51.397 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:04:51.397 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:04:56.635 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:04:56.729 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:04:56.729 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:04:56.729 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:04:56.729 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:04:56.729 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:05:11.697 | INFO     | app.db.user_db:create_user:33 - ✅ Created user: john.doe@example.com
2025-06-17 22:05:17.686 | INFO     | app.db.user_db:get_user_by_email:46 - ℹ️ Found user: john.doe@example.com
2025-06-17 22:05:28.675 | INFO     | app.db.user_db:get_user_by_email:46 - ℹ️ Found user: john.doe@example.com
2025-06-17 22:05:42.907 | INFO     | app.db.user_db:get_user_by_email:46 - ℹ️ Found user: john.doe@example.com
2025-06-17 22:06:19.165 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x000002A050B3D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x000002A050A31D00>
           └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002A050A31260>
    └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002A050AEEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
    │    └ <function subprocess_started at 0x000002A052EFFC40>
    └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002A052F2DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002A052EFF2E0>
           │       │   └ <uvicorn.server.Server object at 0x000002A052F2DE50>
           │       └ <function run at 0x000002A052713600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x000002A052E94540>
           │      └ <function Runner.run at 0x000002A0527CCE00>
           └ <asyncio.runners.Runner object at 0x000002A050AEEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002A0527C6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002A050AEEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002A0527C6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A0527CC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A0526FEA20>
    └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A056103770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C1A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002A0561507A0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A056103770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C1A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C1A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A056375CA0>
          └ <fastapi.applications.FastAPI object at 0x000002A0561507A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A056834F40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A056375CA0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '103', 'sec-ch-ua-platform': '"Windows"', 'u...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A056834F40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002A0557F9120>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002A056375C40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002A0568351C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A056376210>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002A056375C40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002A0568351C0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x000002A05681B8F0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A056376210>
          └ <function wrap_app_handling_exceptions at 0x000002A055076C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>>
          └ <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002A0550800E0>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002A056345E40>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x000002A05681BDD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002A0568353A0>
          └ <function wrap_app_handling_exceptions at 0x000002A055076C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A0568354E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002A0568353A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002A05681BDD0>
                     └ <function get_request_handler.<locals>.app at 0x000002A056345F80>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002A055076340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'form_data': <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000002A056819580>}
                 │         └ <function login_for_access_token at 0x000002A05632E480>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002A05634AFF0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 123, in login_for_access_token
    user = await authenticate_user(form_data.username, form_data.password)
                 │                 │         │         │         └ 'securepassword123'
                 │                 │         │         └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000002A056819580>
                 │                 │         └ 'john.doe@example.com'
                 │                 └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000002A056819580>
                 └ <function authenticate_user at 0x000002A0562DD760>

TypeError: authenticate_user() missing 1 required positional argument: 'db'
2025-06-17 22:06:19.201 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 308
               │     └ 3
               └ <function _main at 0x000002A050B3D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 308
           │    └ <function BaseProcess._bootstrap at 0x000002A050A31D00>
           └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002A050A31260>
    └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002A050AEEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
    │    └ <function subprocess_started at 0x000002A052EFFC40>
    └ <SpawnProcess name='SpawnProcess-31' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002A052F2DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002A052EFF2E0>
           │       │   └ <uvicorn.server.Server object at 0x000002A052F2DE50>
           │       └ <function run at 0x000002A052713600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x000002A052E94540>
           │      └ <function Runner.run at 0x000002A0527CCE00>
           └ <asyncio.runners.Runner object at 0x000002A050AEEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002A0527C6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002A050AEEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002A0527C6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A0527CC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A0526FEA20>
    └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...02A056819580>>)>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A056103770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C1A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002A0561507A0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A056103770>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C1A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C1A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A056375CA0>
          └ <fastapi.applications.FastAPI object at 0x000002A0561507A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A056834F40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A056375CA0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '103', 'sec-ch-ua-platform': '"Windows"', 'u...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A056834F40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002A0557F9120>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002A056375C40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A056375B50>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002A0568351C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A056376210>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002A056375C40>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002A0568351C0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x000002A05681B8F0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A056376210>
          └ <function wrap_app_handling_exceptions at 0x000002A055076C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>>
          └ <fastapi.routing.APIRouter object at 0x000002A050AC7AD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002A0550800E0>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002A056345E40>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A056835300>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x000002A05681BDD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002A0568353A0>
          └ <function wrap_app_handling_exceptions at 0x000002A055076C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A0568354E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002A05683C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002A0568353A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002A05681BDD0>
                     └ <function get_request_handler.<locals>.app at 0x000002A056345F80>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002A055076340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'form_data': <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000002A056819580>}
                 │         └ <function login_for_access_token at 0x000002A05632E480>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002A05634AFF0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 123, in login_for_access_token
    user = await authenticate_user(form_data.username, form_data.password)
                 │                 │         │         │         └ 'securepassword123'
                 │                 │         │         └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000002A056819580>
                 │                 │         └ 'john.doe@example.com'
                 │                 └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000002A056819580>
                 └ <function authenticate_user at 0x000002A0562DD760>

TypeError: authenticate_user() missing 1 required positional argument: 'db'
2025-06-17 22:07:45.194 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:07:45.194 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:07:45.295 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:07:45.295 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:07:45.296 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:07:45.297 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:07:45.298 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:07:45.298 | INFO     | logging:callHandlers:1762 - Finished server process [9188]
2025-06-17 22:07:45.299 | INFO     | logging:callHandlers:1762 - Finished server process [9188]
2025-06-17 22:07:47.724 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:07:47.725 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:07:47.726 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:07:47.726 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:07:47.742 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:07:47.743 | INFO     | logging:callHandlers:1762 - Started server process [11540]
2025-06-17 22:07:47.744 | INFO     | logging:callHandlers:1762 - Started server process [11540]
2025-06-17 22:07:47.744 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:07:47.745 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:07:52.853 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:07:52.941 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:07:52.941 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:07:52.941 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:07:52.955 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:07:52.956 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:08:33.634 | INFO     | app.db.user_db:get_user_by_email:46 - ℹ️ Found user: john.doe@example.com
2025-06-17 22:09:31.928 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:09:31.929 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:09:32.042 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:09:32.042 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:09:32.044 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:09:32.044 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:09:32.045 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:09:32.045 | INFO     | logging:callHandlers:1762 - Finished server process [11540]
2025-06-17 22:09:32.046 | INFO     | logging:callHandlers:1762 - Finished server process [11540]
2025-06-17 22:09:34.459 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:09:34.459 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:09:34.459 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:09:34.459 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:09:34.482 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:09:34.482 | INFO     | logging:callHandlers:1762 - Started server process [7812]
2025-06-17 22:09:34.482 | INFO     | logging:callHandlers:1762 - Started server process [7812]
2025-06-17 22:09:34.482 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:09:34.482 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:09:39.762 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:09:39.892 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:09:39.893 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:09:39.893 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:09:39.894 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:09:39.894 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:09:45.200 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 156
               │     └ 3
               └ <function _main at 0x0000024A90A4D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 156
           │    └ <function BaseProcess._bootstrap at 0x0000024A90941D00>
           └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024A90941260>
    └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024A909FEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
    │    └ <function subprocess_started at 0x0000024A92D9FC40>
    └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=692, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024A92DCDE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=692, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024A92D9F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000024A92DCDE50>
           │       └ <function run at 0x0000024A925C3600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000024A92D34540>
           │      └ <function Runner.run at 0x0000024A9266CE00>
           └ <asyncio.runners.Runner object at 0x0000024A909FEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000024A92666A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000024A909FEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024A92666980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024A9266C7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024A925AEA20>
    └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024A92687EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B90A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024A960577A0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024A92687EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B90A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B90A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A9621B380>
          └ <fastapi.applications.FastAPI object at 0x0000024A960577A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A962279C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A9621B380>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '103', 'sec-ch-ua-platform': '"Windows"', 'u...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A962279C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000024A956A5120>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A9621AF30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024A96227B00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A961106B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A9621AF30>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024A96227B00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000024A966B8890>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024A96081E20>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A961106B0>
          └ <function wrap_app_handling_exceptions at 0x0000024A94D7AC00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000024A96081E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024A96081E20>>
          └ <fastapi.routing.APIRouter object at 0x0000024A96081E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024A94F1C0E0>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024A961E5E40>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000024A966B8CE0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000024A96227CE0>
          └ <function wrap_app_handling_exceptions at 0x0000024A94D7AC00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227E20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000024A96227CE0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024A966B8CE0>
                     └ <function get_request_handler.<locals>.app at 0x0000024A961E5F80>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024A94D7A340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'form_data': <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x0000024A966E35F0>}
                 │         └ <function login_for_access_token at 0x0000024A961CE480>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024A961EA4B0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 123, in login_for_access_token
    db = user_db.user_db.collection
         └ <app.db.user_db.UserDB object at 0x0000024A95689B80>

AttributeError: 'UserDB' object has no attribute 'user_db'
2025-06-17 22:09:45.238 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 156
               │     └ 3
               └ <function _main at 0x0000024A90A4D760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 156
           │    └ <function BaseProcess._bootstrap at 0x0000024A90941D00>
           └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024A90941260>
    └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024A909FEBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
    │    └ <function subprocess_started at 0x0000024A92D9FC40>
    └ <SpawnProcess name='SpawnProcess-33' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=692, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024A92DCDE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=692, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024A92D9F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000024A92DCDE50>
           │       └ <function run at 0x0000024A925C3600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000024A92D34540>
           │      └ <function Runner.run at 0x0000024A9266CE00>
           └ <asyncio.runners.Runner object at 0x0000024A909FEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000024A92666A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000024A909FEF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024A92666980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024A9266C7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024A925AEA20>
    └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...024A966E35F0>>)>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024A92687EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B90A0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024A960577A0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024A92687EC0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B90A0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B90A0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A9621B380>
          └ <fastapi.applications.FastAPI object at 0x0000024A960577A0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A962279C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A9621B380>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '103', 'sec-ch-ua-platform': '"Windows"', 'u...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A962279C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000024A956A5120>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A9621AF30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A96219790>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024A96227B00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A961106B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A9621AF30>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024A96227B00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000024A966B8890>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024A96081E20>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A961106B0>
          └ <function wrap_app_handling_exceptions at 0x0000024A94D7AC00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000024A96081E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024A96081E20>>
          └ <fastapi.routing.APIRouter object at 0x0000024A96081E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024A94F1C0E0>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024A961E5E40>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227C40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000024A966B8CE0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000024A96227CE0>
          └ <function wrap_app_handling_exceptions at 0x0000024A94D7AC00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024A96227E20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000024A966B9...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000024A96227CE0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024A966B8CE0>
                     └ <function get_request_handler.<locals>.app at 0x0000024A961E5F80>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024A94D7A340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'form_data': <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x0000024A966E35F0>}
                 │         └ <function login_for_access_token at 0x0000024A961CE480>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024A961EA4B0>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 123, in login_for_access_token
    db = user_db.user_db.collection
         └ <app.db.user_db.UserDB object at 0x0000024A95689B80>

AttributeError: 'UserDB' object has no attribute 'user_db'
2025-06-17 22:10:20.280 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:10:20.281 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:10:20.386 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:10:20.386 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:10:20.387 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:10:20.387 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:10:20.388 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:10:20.388 | INFO     | logging:callHandlers:1762 - Finished server process [7812]
2025-06-17 22:10:20.389 | INFO     | logging:callHandlers:1762 - Finished server process [7812]
2025-06-17 22:10:22.884 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:10:22.885 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:10:22.886 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:10:22.886 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:10:22.903 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:10:22.904 | INFO     | logging:callHandlers:1762 - Started server process [10380]
2025-06-17 22:10:22.904 | INFO     | logging:callHandlers:1762 - Started server process [10380]
2025-06-17 22:10:22.905 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:10:22.905 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:10:27.913 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:10:28.011 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:10:28.012 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:10:28.012 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:10:28.013 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:10:28.013 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:01.681 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:13:01.681 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:13:01.791 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:13:01.791 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:13:01.792 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:13:01.792 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:13:01.793 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:13:01.794 | INFO     | logging:callHandlers:1762 - Finished server process [10380]
2025-06-17 22:13:01.794 | INFO     | logging:callHandlers:1762 - Finished server process [10380]
2025-06-17 22:13:04.434 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:13:04.434 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:13:04.434 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:13:04.434 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:13:04.460 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:13:04.461 | INFO     | logging:callHandlers:1762 - Started server process [12944]
2025-06-17 22:13:04.462 | INFO     | logging:callHandlers:1762 - Started server process [12944]
2025-06-17 22:13:04.462 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:04.463 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:10.260 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:13:10.363 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:13:10.363 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:13:10.363 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:13:10.363 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:10.363 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:11.961 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:13:11.962 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:13:12.069 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:13:12.069 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:13:12.070 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:13:12.070 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:13:12.071 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:13:12.071 | INFO     | logging:callHandlers:1762 - Finished server process [12944]
2025-06-17 22:13:12.072 | INFO     | logging:callHandlers:1762 - Finished server process [12944]
2025-06-17 22:13:14.401 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:13:14.401 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:13:14.401 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:13:14.401 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:13:14.426 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:13:14.427 | INFO     | logging:callHandlers:1762 - Started server process [532]
2025-06-17 22:13:14.428 | INFO     | logging:callHandlers:1762 - Started server process [532]
2025-06-17 22:13:14.428 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:14.429 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:19.488 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:13:19.603 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:13:19.603 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:13:19.603 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:13:19.603 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:19.603 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:22.077 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:13:22.077 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:13:22.194 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:13:22.194 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:13:22.194 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:13:22.194 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:13:22.194 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:13:22.194 | INFO     | logging:callHandlers:1762 - Finished server process [532]
2025-06-17 22:13:22.194 | INFO     | logging:callHandlers:1762 - Finished server process [532]
2025-06-17 22:13:24.625 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:13:24.626 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:13:24.627 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:13:24.627 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:13:24.643 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:13:24.644 | INFO     | logging:callHandlers:1762 - Started server process [1872]
2025-06-17 22:13:24.644 | INFO     | logging:callHandlers:1762 - Started server process [1872]
2025-06-17 22:13:24.644 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:24.644 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:29.728 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:13:29.834 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:13:29.835 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:13:29.835 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:13:29.835 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:29.836 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:29.837 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:13:29.838 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 22:13:29.840 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 22:13:31.995 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:13:32.011 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:13:32.012 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:13:32.013 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:13:32.013 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:13:32.013 | INFO     | logging:callHandlers:1762 - Started server process [6920]
2025-06-17 22:13:32.028 | INFO     | logging:callHandlers:1762 - Started server process [6920]
2025-06-17 22:13:32.028 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:32.029 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:13:37.197 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:13:37.298 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:13:37.298 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:13:37.298 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:13:37.298 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:13:37.298 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:14:00.711 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 156
               │     └ 3
               └ <function _main at 0x0000020E2F6AD760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 156
           │    └ <function BaseProcess._bootstrap at 0x0000020E2F5A1D00>
           └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000020E2F5A1260>
    └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000020E2F65EBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
    │    └ <function subprocess_started at 0x0000020E31A1FC40>
    └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000020E31A4DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000020E31A1F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000020E31A4DE50>
           │       └ <function run at 0x0000020E31233600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000020E319B4540>
           │      └ <function Runner.run at 0x0000020E312ECE00>
           └ <asyncio.runners.Runner object at 0x0000020E2F65EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000020E312E6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000020E2F65EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000020E312E6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000020E312EC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000020E3121EA20>
    └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020E34E8B920>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D370>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000020E31A26BD0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020E34E8B920>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D370>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D370>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020E34EB8530>
          └ <fastapi.applications.FastAPI object at 0x0000020E31A26BD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020E34EC39C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020E34EB8530>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '103', 'sec-ch-ua-platform': '"Windows"', 'u...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020E34EC39C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000020E34345120>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020E34EB9DF0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000020E34EC3B00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020E34329550>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020E34EB9DF0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000020E34EC3B00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000020E3535CF50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000020E34E2B500>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020E34329550>
          └ <function wrap_app_handling_exceptions at 0x0000020E33B96C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000020E34E2B500>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000020E34E2B500>>
          └ <fastapi.routing.APIRouter object at 0x0000020E34E2B500>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000020E33BA00E0>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000020E34E85E40>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000020E3535CD40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000020E34EC3CE0>
          └ <function wrap_app_handling_exceptions at 0x0000020E33B96C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3E20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000020E34EC3CE0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000020E3535CD40>
                     └ <function get_request_handler.<locals>.app at 0x0000020E34E85F80>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000020E33B96340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'form_data': <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x0000020E34B89730>}
                 │         └ <function login_for_access_token at 0x0000020E34E72480>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000020E34E8B230>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 128, in login_for_access_token
    access_token = create_access_token(user["username"], str(user["_id"]), timedelta(days=7))
                   │                   │                     │             └ <class 'datetime.timedelta'>
                   │                   │                     └ {'_id': ObjectId('6851993f9a6e3d924a4111b4'), 'email': 'john.doe@example.com', 'username': 'john.doe@example.com', 'hashed_pa...
                   │                   └ {'_id': ObjectId('6851993f9a6e3d924a4111b4'), 'email': 'john.doe@example.com', 'username': 'john.doe@example.com', 'hashed_pa...
                   └ <function create_access_token at 0x0000020E34E71620>

  File "C:\Users\anant\ai_email_categorizer\app\core\security.py", line 39, in create_access_token
    return jwt.encode(payload, settings.SECRET_KEY, algorithm=ALGORITHM)
           │   │      │        │                              └ 'HS256'
           │   │      │        └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...
           │   │      └ {'sub': 'john.doe@example.com', 'id': '6851993f9a6e3d924a4111b4', 'exp': datetime.datetime(2025, 6, 24, 16, 44, 0, 711821, tz...
           │   └ <function encode at 0x0000020E34E1D800>
           └ <module 'jose.jwt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\jose\\jwt.py'>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pydantic\main.py", line 767, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
                                 │                                          └ 'SECRET_KEY'
                                 └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...

AttributeError: 'Settings' object has no attribute 'SECRET_KEY'
2025-06-17 22:14:00.746 | ERROR    | logging:callHandlers:1762 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 156
               │     └ 3
               └ <function _main at 0x0000020E2F6AD760>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 156
           │    └ <function BaseProcess._bootstrap at 0x0000020E2F5A1D00>
           └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000020E2F5A1260>
    └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000020E2F65EBD0>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
    │    └ <function subprocess_started at 0x0000020E31A1FC40>
    └ <SpawnProcess name='SpawnProcess-38' parent=9016 started>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000020E31A4DE50>>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=680, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000020E31A1F2E0>
           │       │   └ <uvicorn.server.Server object at 0x0000020E31A4DE50>
           │       └ <function run at 0x0000020E31233600>
           └ <module 'asyncio' from 'C:\\Users\\anant\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000020E319B4540>
           │      └ <function Runner.run at 0x0000020E312ECE00>
           └ <asyncio.runners.Runner object at 0x0000020E2F65EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000020E312E6A20>
           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000020E2F65EF00>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 672, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000020E312E6980>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 639, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000020E312EC7C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1985, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000020E3121EA20>
    └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...GBUlOy', ...}>)>
> File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020E34E8B920>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D370>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000020E31A26BD0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020E34E8B920>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D370>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D370>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020E34EB8530>
          └ <fastapi.applications.FastAPI object at 0x0000020E31A26BD0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020E34EC39C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020E34EB8530>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '103', 'sec-ch-ua-platform': '"Windows"', 'u...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020E34EC39C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000020E34345120>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020E34EB9DF0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020E34EB9E20>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000020E34EC3B00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020E34329550>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020E34EB9DF0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000020E34EC3B00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x0000020E3535CF50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000020E34E2B500>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020E34329550>
          └ <function wrap_app_handling_exceptions at 0x0000020E33B96C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x0000020E34E2B500>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000020E34E2B500>>
          └ <fastapi.routing.APIRouter object at 0x0000020E34E2B500>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000020E33BA00E0>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000020E34E85E40>
          └ APIRoute(path='/routers/v1/token', name='login_for_access_token', methods=['POST'])
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3C40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x0000020E3535CD40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000020E34EC3CE0>
          └ <function wrap_app_handling_exceptions at 0x0000020E33B96C00>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000020E34EC3E20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000020E3535D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000020E34EC3CE0>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000020E3535CD40>
                     └ <function get_request_handler.<locals>.app at 0x0000020E34E85F80>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000020E33B96340>
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'form_data': <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x0000020E34B89730>}
                 │         └ <function login_for_access_token at 0x0000020E34E72480>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000020E34E8B230>

  File "C:\Users\anant\ai_email_categorizer\app\routers\auth\auth_routes.py", line 128, in login_for_access_token
    access_token = create_access_token(user["username"], str(user["_id"]), timedelta(days=7))
                   │                   │                     │             └ <class 'datetime.timedelta'>
                   │                   │                     └ {'_id': ObjectId('6851993f9a6e3d924a4111b4'), 'email': 'john.doe@example.com', 'username': 'john.doe@example.com', 'hashed_pa...
                   │                   └ {'_id': ObjectId('6851993f9a6e3d924a4111b4'), 'email': 'john.doe@example.com', 'username': 'john.doe@example.com', 'hashed_pa...
                   └ <function create_access_token at 0x0000020E34E71620>

  File "C:\Users\anant\ai_email_categorizer\app\core\security.py", line 39, in create_access_token
    return jwt.encode(payload, settings.SECRET_KEY, algorithm=ALGORITHM)
           │   │      │        │                              └ 'HS256'
           │   │      │        └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...
           │   │      └ {'sub': 'john.doe@example.com', 'id': '6851993f9a6e3d924a4111b4', 'exp': datetime.datetime(2025, 6, 24, 16, 44, 0, 711821, tz...
           │   └ <function encode at 0x0000020E34E1D800>
           └ <module 'jose.jwt' from 'C:\\Users\\anant\\ai_email_categorizer\\venv_py312\\Lib\\site-packages\\jose\\jwt.py'>

  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\pydantic\main.py", line 767, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
                                 │                                          └ 'SECRET_KEY'
                                 └ Settings(GMAIL_CREDENTIALS_FILE='credentials.json', GMAIL_TOKEN_FILE='token_gmail.json', GMAIL_API_SCOPES='https://www.google...

AttributeError: 'Settings' object has no attribute 'SECRET_KEY'
2025-06-17 22:14:51.504 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:14:51.504 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 22:14:51.615 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:14:51.615 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 22:14:51.615 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:14:51.615 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:14:51.615 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 22:14:51.615 | INFO     | logging:callHandlers:1762 - Finished server process [6920]
2025-06-17 22:14:51.615 | INFO     | logging:callHandlers:1762 - Finished server process [6920]
2025-06-17 22:14:53.993 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:14:53.993 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:14:53.993 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:14:53.993 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:14:54.008 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:14:54.008 | INFO     | logging:callHandlers:1762 - Started server process [5328]
2025-06-17 22:14:54.022 | INFO     | logging:callHandlers:1762 - Started server process [5328]
2025-06-17 22:14:54.022 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:14:54.023 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:14:59.249 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:14:59.346 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:14:59.346 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:14:59.346 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:14:59.346 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:14:59.346 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:14:59.346 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:14:59.346 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 22:14:59.354 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 22:15:01.840 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:15:01.840 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:15:01.840 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:15:01.840 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:15:01.855 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:15:01.855 | INFO     | logging:callHandlers:1762 - Started server process [13248]
2025-06-17 22:15:01.870 | INFO     | logging:callHandlers:1762 - Started server process [13248]
2025-06-17 22:15:01.871 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:15:01.871 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:15:07.088 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:15:07.191 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:15:07.191 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:15:07.191 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:15:07.191 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:15:07.191 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:15:07.191 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 22:15:07.191 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 22:15:07.207 | ERROR    | logging:callHandlers:1762 - Traceback (most recent call last):
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "C:\Users\anant\ai_email_categorizer\venv_py312\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anant\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-17 22:15:09.523 | INFO     | app.core.logger:setup_logging:67 - Logging configured successfully
2025-06-17 22:15:09.524 | INFO     | app.main:<module>:12 - Starting application initialization
2025-06-17 22:15:09.524 | INFO     | app.main:<module>:19 - FastAPI application created
2025-06-17 22:15:09.525 | INFO     | app.main:<module>:23 - Middleware configured
2025-06-17 22:15:09.541 | INFO     | app.main:<module>:30 - API routes configured
2025-06-17 22:15:09.542 | INFO     | logging:callHandlers:1762 - Started server process [5992]
2025-06-17 22:15:09.542 | INFO     | logging:callHandlers:1762 - Started server process [5992]
2025-06-17 22:15:09.543 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:15:09.544 | INFO     | logging:callHandlers:1762 - Waiting for application startup.
2025-06-17 22:15:14.511 | INFO     | app.db.base:_create_indexes:49 - ✅ Created index on users.email
2025-06-17 22:15:14.602 | INFO     | app.db.base:_create_indexes:53 - ✅ Created index on emails.gmail_id
2025-06-17 22:15:14.602 | INFO     | app.db.base:connect_db:35 - ✅ Connected to MongoDB
2025-06-17 22:15:14.602 | INFO     | app.main:startup_event:37 - Application startup complete
2025-06-17 22:15:14.602 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 22:15:14.602 | INFO     | logging:callHandlers:1762 - Application startup complete.
2025-06-17 23:18:39.304 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 23:18:39.305 | INFO     | logging:callHandlers:1762 - Shutting down
2025-06-17 23:18:39.406 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 23:18:39.406 | INFO     | logging:callHandlers:1762 - Waiting for application shutdown.
2025-06-17 23:18:39.407 | INFO     | app.main:shutdown_event:41 - Application shutdown initiated
2025-06-17 23:18:39.408 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 23:18:39.408 | INFO     | logging:callHandlers:1762 - Application shutdown complete.
2025-06-17 23:18:39.409 | INFO     | logging:callHandlers:1762 - Finished server process [5992]
2025-06-17 23:18:39.410 | INFO     | logging:callHandlers:1762 - Finished server process [5992]
